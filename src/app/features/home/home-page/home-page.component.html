<main class="app-shell">
  <mat-card class="top-row" role="region" aria-label="Bidding platform toolbar">
      <div class="card">
        <nav class="tabs" role="tablist" aria-label="Bidding views">
            <a
              *ngFor="let tab of tabs"
              type="button"
              class="tab"
              [attr.aria-pressed]="activeTab === tab.id"
              [class.active]="activeTab === tab.id"
              (click)="selectTab(tab.id)"
            >
              {{ tab.label }}
            </a>
          </nav>
          <button
            *ngIf="activeTab === 'customers'"
            type="button"
            class="mapping-button"
            (click)="openSecretPopup()"
          >
            Customer Name Mapping
          </button>
      </div>
      <div class="filters" *ngIf="activeTab === 'reports'">
        <div class="select-wrap">
          <select class="select" [(ngModel)]="pendingMonth">
            <option [ngValue]="'All'">All Months</option>
            <option *ngFor="let month of months" [ngValue]="month">{{ month }}</option>
          </select>
          <select class="select" [(ngModel)]="pendingYear">
            <option [ngValue]="'All'">All Years</option>
            <option *ngFor="let year of years" [ngValue]="year">{{ year }}</option>
          </select>
        </div>
        <div class="filter-actions">
          <button
            type="button"
            class="filter-button filter-button--apply"
            (click)="applyFilters()"
            [disabled]="isApplying || filtersUnchanged"
          >
            <mat-icon aria-hidden="true">check</mat-icon>
            Apply
          </button>
          <button
            type="button"
            class="filter-button filter-button--reset"
            (click)="resetFilters()"
            [disabled]="isApplying || resetDisabled"
          >
            <mat-icon aria-hidden="true">restart_alt</mat-icon>
            Reset Filters
          </button>
        </div>
      </div>
      <div
        class="filters-loader"
        *ngIf="activeTab === 'reports' && isApplying"
        aria-live="polite"
        aria-busy="true"
      >
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </div>
  </mat-card>

  <section class="view-container">
    <router-outlet></router-outlet>
  </section>
</main>

<div *ngIf="showSecretPopup" class="secret-dialog" role="dialog" aria-modal="true">
  <mat-card class="material-card secret-card">
    <div class="secret-header">
      <div class="secret-title">
        <h3>Customer Name Mapping</h3>
      </div>
      <button mat-icon-button type="button" (click)="closeSecretPopup()" aria-label="Close">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="table-container app-table-container">
      <table class="app-data-table app-data-table--compact">
        <thead>
          <tr>
            <th>Column 1</th>
            <th>Column 2</th>
            <th>Column 3</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of secretTableData">
            <td>{{ row.column1 }}</td>
            <td>{{ row.column2 }}</td>
            <td>{{ row.column3 }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-card>
</div>
